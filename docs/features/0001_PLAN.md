# Navigační lišta (Navbar) – plán implementace

Krátký popis: Přidat trvalou horní navigační lištu ve stylu dle poskytnutého screenshotu. Vlevo logo z `public/logo-destinote.png`, uprostřed odkazy „Home“, „Země“, „Komunita“, „Letenky“, „Žebříček“. Vpravo: pokud není uživatel přihlášen, zobrazit tlačítko „Přihlásit se“. Je-li přihlášen, zobrazit kulatou ikonku profilu s iniciálou; po kliknutí přejít na `/dashboard`. Přihlášení musí přetrvat po refreshi (využít již nastavenou Firebase Auth persistenci).

## Soubory a změny

- `src/components/layout/Navbar.tsx` – nový komponent Navbar

  - Přijímá žádné props; čte stav z `useAuth()`.
  - Zobrazuje logo z `public/logo-destinote.png` přes `next/image` + odkaz na `/`.
  - Definuje pole navigačních položek:
    - Home → `/`
    - Země → `/countries` (nová placeholder stránka; viz níže)
    - Komunita → `/dashboard?tab=social` (využije existující tab „social“ v dashboardu)
    - Letenky → `/flights` (nová placeholder stránka; viz níže)
    - Žebříček → `/leaderboard` (nová placeholder stránka; viz níže)
  - Aktivní odkaz zvýrazněn podtržením (underline, underline-offset, font/barva viz níže). Aktivitu detekovat přes `usePathname()`.
  - Vpravo:
    - Nepřihlášen: tlačítko „Přihlásit se“ → push `/auth/login`.
    - Přihlášen: kulatá „avatar“ kapsle s iniciálou z `user.displayName` nebo `user.email` (bezpečně, s null-checky). Klik → push `/dashboard`.
  - Ošetření chyb: žádné asynchronní operace; pouze navigace.

- `src/app/layout.tsx` – integrace Navbaru

  - Import `Navbar` a vložení do kořenového layoutu nad `children`, aby se navbar zobrazoval na všech stránkách.

- `src/styles/globals.css` (volitelné)

  - Drobné utilitní třídy jen pokud bude třeba; primárně použijeme Tailwind utility.

- Nové placeholder stránky (tenké, pouze s nadpisem), aby odkazy nevedly na 404:
  - `src/app/countries/page.tsx`
  - `src/app/flights/page.tsx`
  - `src/app/leaderboard/page.tsx`
  - Tyto stránky mohou později získat reálný obsah.

## Stylování a UX (Tailwind)

- Pozadí lišty: světle modrá (např. `bg-[#cbe1f7]`), text tmavě modrý (`text-blue-900`).
- Výška lišty ~ 56–64 px, obsah centrován v kontejneru (`max-w-7xl mx-auto px-4`).
- Odkazy: `text-blue-900 hover:underline underline-offset-4 decoration-2`. Aktivní odkaz má `underline` trvale.
- Tlačítko „Přihlásit se“: sytě zelené pozadí (`bg-green-700 hover:bg-green-800`), bílý text, zaoblení na pilulku.
- Avatar: kruh `w-9 h-9`, zelené pozadí `bg-green-100`, tmavě zelené písmo `text-green-700`, středění `flex items-center justify-center`, kliknutelný.
- Responsivita: pro mobil jednoduché zalomení; hamburger není v rozsahu, ponecháme horizontální lištu s overflow-x.

## Logika a algoritmy

1. Zjištění přihlášení

   - V navbaru použít `const { user } = useAuth()`.
   - Přihlášení již perzistuje díky `setPersistence(auth, browserLocalPersistence)` v `src/lib/firebase.ts` – pouze ověřit, že `AuthProvider` je v `src/app/layout.tsx` (už je).

2. Vykreslení avataru vs. tlačítka

   - Je-li `user == null` → vykreslit tlačítko „Přihlásit se“ (onClick → push `/auth/login`).
   - Jinak vykreslit kruh s iniciálou: bezpečně odvodit iniciálu: `user.displayName?.charAt(0)?.toUpperCase() || user.email?.charAt(0)?.toUpperCase() || "?"`.
   - Klik na avatar → `router.push('/dashboard')`.

3. Aktivní odkaz

   - `const pathname = usePathname()`.
   - Položka je aktivní, pokud `pathname` shodná s její cestou (případně prefix-match pro `/dashboard?tab=social` → aktivní „Komunita“ při `pathname === '/dashboard'`).

4. Logo
   - Vlevo `next/image` se zdrojem `/logo-destinote.png` (uvedené v `public/`). Klik → `/`.

## Kroky implementace

1. Vytvořit `src/components/layout/Navbar.tsx`.

   - Použít `"use client"`, `next/link`, `next/navigation` (`usePathname`, `useRouter`), `next/image`, `useAuth`.
   - Definovat pole navigačních položek a logiku aktivního odkazu.
   - Vykreslit logo, nav, pravý slot (login/avatar).

2. Upravit `src/app/layout.tsx` a vložit `<Navbar />` nad `{children}`.

3. Vytvořit placeholder stránky:

   - `src/app/countries/page.tsx` – jednoduchý nadpis „Země“.
   - `src/app/flights/page.tsx` – „Letenky“.
   - `src/app/leaderboard/page.tsx` – „Žebříček“.

4. Ověřit přetrvání přihlášení po refreshi
   - Spustit aplikaci, přihlásit se, refresh: avatar viditelný, klik → `/dashboard`.

## Poznámky k chybám a bezpečnosti

- Při odvozování iniciály vždy používat volitelné řetězení (zabrání `Cannot read properties of undefined`).
- Navigace je klientská; žádné volání API v Navbaru.
- Pokud by MapLibre varoval o projekci, je již ošetřen fallback na `mercator` v `VectorWorldMap`.
